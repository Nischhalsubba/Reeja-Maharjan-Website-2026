---
import BaseLayout from '../layouts/BaseLayout.astro';
import ButtonLink from '../components/ButtonLink.astro';
import Container from '../components/Container.astro';
import FloatingTagPill from '../components/FloatingTagPill.astro';
import HeroDeviceMockup from '../components/HeroDeviceMockup.astro';
import MetricCard from '../components/MetricCard.astro';
import ProofSnippetCard from '../components/ProofSnippetCard.astro';
import DocumentGalleryCard from '../components/DocumentGalleryCard.astro';
import DocumentLightbox from '../components/DocumentLightbox.astro';
import { profile } from '../content/profile';

const formAction = import.meta.env.PUBLIC_FORMSPREE_ENDPOINT ?? '';
const publicDocs = profile.documentGallery
  .filter((doc) => doc.public)
  .sort((a, b) => Number(Boolean(b.featured)) - Number(Boolean(a.featured)));

const docCategories = ['All', ...new Set(publicDocs.map((doc) => doc.category))];
---

<BaseLayout
  title="Home"
  description="Premium nursing portfolio of Reeja Maharjan, Registered Nurse (Nepal), featuring clinical experience, credentials, and curated document verification."
  page="home"
>
  <section id="hero" class="section-pad pt-5 sm:pt-6">
    <Container size="wide">
      <article class="card-surface hero-stage" data-motion="reveal">
        <div class="watermark" data-hero-watermark aria-hidden="true">
          {profile.brand.watermarkWord}
        </div>

        <div class="hero-grid">
          <div class="hero-copy-block" data-hero-root>
            <p class="section-label">Registered Nurse Portfolio</p>
            <h1 class="hero-title mt-3" data-hero-title>{profile.hero.headline}</h1>
            <p class="hero-subtitle mt-4" data-hero-subtitle>{profile.hero.subheadline}</p>
            <p class="section-body hero-side-copy reading-wrap" data-hero-copy>
              <strong>{profile.role}</strong> based in <strong>{profile.location}</strong>. Focused on maternal and newborn care,
              patient counselling, ward coordination, and clear clinical communication.
            </p>

            <div class="hero-actions" data-hero-actions>
              <ButtonLink href={profile.resumePdfPath} variant="primary">Download Resume</ButtonLink>
              <button type="button" class="btn-inline-secondary" data-scroll-target="#contact">
                Contact
              </button>
              <button type="button" class="btn-inline-secondary" data-scroll-target="#documents">
                View Documents
              </button>
            </div>
          </div>

          <div>
            <div class="hero-pill-cloud" aria-hidden="true">
              {profile.hero.floatingTags.map((tag) => <FloatingTagPill label={tag} />)}
            </div>
            <HeroDeviceMockup profile={profile} />
          </div>
        </div>
      </article>
    </Container>
  </section>

  <section id="services" class="section-pad">
    <Container size="wide">
      <div data-motion="reveal">
        <p class="section-label">Service</p>
        <h2 class="section-title mt-3">Core Care Areas</h2>
        <p class="section-body mt-3 reading-wrap">
          Practice areas organized for quick recruiter review, emphasizing clinical support, patient education, and continuity-focused nursing care.
        </p>
      </div>

      <div class="service-grid mt-5">
        <article class="card-surface service-feature" data-motion="reveal" data-tilt-card>
          <div class="service-feature__art"></div>
          <div class="mt-4 grid gap-2 sm:grid-cols-2">
            {profile.quickFacts.map((fact) => <p class="section-body text-sm">{fact}</p>)}
          </div>
        </article>

        <div class="service-cards">
          {
            profile.practiceAreas.slice(0, 4).map((area, index) => (
              <article class="card-surface service-card" data-motion="reveal" data-tilt-card>
                <p class="eyebrow">Area 0{index + 1}</p>
                <h3 class="mt-2">{area}</h3>
                <p>
                  {index === 0 &&
                    'Frontline maternity and newborn support with safe routines, close observation, and respectful patient communication.'}
                  {index === 1 &&
                    'Clear pregnancy and postpartum guidance to support patient understanding, confidence, and follow-up care behavior.'}
                  {index === 2 &&
                    'Family-focused breastfeeding counselling and health teaching aligned with practical home care needs.'}
                  {index === 3 &&
                    'Ward-based nursing support with timely escalation, coordination, and continuity-focused handovers.'}
                </p>
                <a href="/#highlights">See Clinical Highlights</a>
              </article>
            ))
          }
        </div>
      </div>
    </Container>
  </section>

  <section id="highlights" class="section-pad">
    <Container size="wide">
      <div data-motion="reveal">
        <p class="section-label">Remarkable Clinical Work</p>
        <h2 class="section-title mt-3">Experience Highlights</h2>
        <p class="section-body mt-3 reading-wrap">
          Hospital roles presented as layered proof cards for faster review of responsibilities, ward settings, and nursing scope.
        </p>
      </div>

      <div class="highlights-stage mt-5" data-timeline-root>
        <div class="timeline-line timeline-line--bg" aria-hidden="true"></div>
        <div class="timeline-line timeline-line--progress" aria-hidden="true" data-timeline-progress></div>
        <ol class="highlight-list">
          {
            profile.experience.map((job) => (
              <li class="highlight-item" data-timeline-item>
                <article class="card-surface highlight-card" data-motion="reveal" data-tilt-card>
                  <div class="highlight-header">
                    <h3 class="highlight-role">{job.role}</h3>
                    <p class="highlight-period">{job.period}</p>
                  </div>
                  <p class="highlight-org">
                    {job.organization} · {job.location}
                  </p>
                  <ul class="bullet-list">
                    {job.highlights.map((item) => <li>{item}</li>)}
                  </ul>
                </article>
              </li>
            ))
          }
        </ol>
      </div>
    </Container>
  </section>

  <section id="about" class="section-pad">
    <Container size="narrow">
      <div data-motion="reveal">
        <p class="section-label">About</p>
        <h2 class="section-title mt-3">Professional Profile</h2>
      </div>

      <article class="card-surface mt-5 p-5 sm:p-6" data-motion="reveal" data-tilt-card>
        <div class="reading-wrap">
          <p class="section-body">{profile.summary}</p>
          <h3 class="mt-6 text-2xl">Care Philosophy</h3>
          <ul class="bullet-list mt-3">
            {profile.carePhilosophy.map((point) => <li>{point}</li>)}
          </ul>
          <h3 class="mt-6 text-2xl">Professional Direction</h3>
          <ul class="bullet-list mt-3">
            {profile.goals.map((goal) => <li>{goal}</li>)}
          </ul>
        </div>
      </article>

      <div class="stats-grid mt-4">
        {profile.stats.map((item) => <MetricCard item={item} />)}
      </div>
    </Container>
  </section>

  <section id="proof" class="section-pad">
    <Container size="wide">
      <div data-motion="reveal">
        <p class="section-label">Exceeded Expectations</p>
        <h2 class="section-title mt-3">Clinical Proof & Recommendations</h2>
        <p class="section-body mt-3 reading-wrap">
          Highlights paraphrased from official letters, documented training, and listed references to present evidence without exposing sensitive personal identifiers.
        </p>
      </div>

      <div class="proof-grid mt-5">
        {profile.proofSnippets.map((item) => <ProofSnippetCard item={item} />)}
      </div>
    </Container>
  </section>

  <section id="credentials" class="section-pad">
    <Container size="narrow">
      <div data-motion="reveal">
        <p class="section-label">Credentials</p>
        <h2 class="section-title mt-3">Licensure & Training</h2>
        <p class="section-body mt-3 reading-wrap">
          Core licensure and clinical training relevant to maternal care, newborn support, OT workflow readiness, and emergency response.
        </p>
      </div>

      <div class="credential-list mt-5">
        {
          profile.credentials.map((item) => (
            <article class="card-surface credential-card" data-motion="reveal" data-tilt-card>
              <div class="credential-head">
                <h3 class="credential-title">{item.title}</h3>
                <p class="credential-date">{item.date}</p>
              </div>
              <p class="credential-issuer">{item.issuer}</p>
              <p class="credential-copy">{item.details}</p>
            </article>
          ))
        }
      </div>
    </Container>
  </section>

  <section id="documents" class="section-pad">
    <Container size="wide">
      <div data-motion="reveal">
        <p class="section-label">Verification</p>
        <h2 class="section-title mt-3">Curated Document Gallery</h2>
        <p class="section-body mt-3 reading-wrap">
          Public portfolio evidence includes professional experience, training, and education records. Sensitive identity documents are intentionally excluded.
        </p>
      </div>

      <div class="mt-5" data-doc-gallery>
        <div class="doc-filter-row" data-motion="reveal">
          {docCategories.map((category) => (
            <button
              type="button"
              class="doc-filter"
              data-doc-filter={category}
              data-active={category === 'All' ? 'true' : 'false'}
              aria-pressed={category === 'All' ? 'true' : 'false'}
            >
              {category}
            </button>
          ))}
        </div>

        <div class="doc-grid mt-4" data-auto-animate>
          {publicDocs.map((doc) => <DocumentGalleryCard doc={doc} />)}
        </div>
      </div>
    </Container>
    <DocumentLightbox />
  </section>

  <section id="skills" class="section-pad">
    <Container size="narrow">
      <div data-motion="reveal">
        <p class="section-label">Practice Readiness</p>
        <h2 class="section-title mt-3">Skills, Languages & Education</h2>
      </div>

      <div class="stack-list mt-5" data-skills-grid>
        {
          profile.skillGroups.map((group) => (
            <article class="card-surface stack-card" data-motion="reveal">
              <h3 class="stack-title">{group.area}</h3>
              <div class="stack-chip-grid">
                {group.items.map((item) => <span class="stack-chip" data-skill-chip>{item}</span>)}
              </div>
            </article>
          ))
        }

        <article class="card-surface stack-card" data-motion="reveal" data-tilt-card>
          <h3 class="stack-title">Education</h3>
          <div class="mt-3 grid gap-3">
            {profile.education.map((edu) => (
              <div class="panel-outline p-3">
                <p class="font-semibold">{edu.level}</p>
                <p class="section-body mt-1 text-sm">{edu.institution}</p>
                <p class="muted mt-2 text-xs uppercase tracking-[0.12em]">
                  {edu.period} · {edu.result}
                </p>
              </div>
            ))}
          </div>
        </article>

        <article class="card-surface stack-card" data-motion="reveal" data-tilt-card>
          <h3 class="stack-title">Languages</h3>
          <div class="chip-row mt-3">
            {profile.languages.map((lang) => <span class="chip">{lang}</span>)}
          </div>
          <h3 class="stack-title mt-6">References</h3>
          <div class="mt-3 grid gap-3">
            {profile.references.map((ref) => (
              <div class="panel-outline p-3">
                <p class="font-semibold">{ref.name}</p>
                <p class="section-body mt-1 text-sm">{ref.role}</p>
                <p class="text-link mt-2 text-sm">{ref.contact}</p>
              </div>
            ))}
          </div>
        </article>
      </div>
    </Container>
  </section>

  <section id="contact" class="section-pad pb-16 sm:pb-20">
    <Container size="narrow">
      <article class="card-surface contact-shell" data-motion="reveal" data-tilt-card>
        <p class="section-label">Contact</p>
        <h2 class="section-title mt-3">Let’s Discuss Nursing Opportunities</h2>
        <p class="section-body mt-3 reading-wrap">
          Available for roles related to maternal and newborn care, patient counselling, ward support, and structured clinical coordination.
        </p>

        <div class="contact-grid mt-5">
          <div>
            <div class="contact-links">
              <p>
                Email: <a href={`mailto:${profile.email}`}>{profile.email}</a>
              </p>
              <p>
                Phone: <a href={`tel:${profile.phone}`}>{profile.phone}</a>
              </p>
              <p>
                LinkedIn:
                <a href={profile.linkedin} target="_blank" rel="noreferrer noopener"> Open profile</a>
              </p>
              <p>
                Resume: <a href={profile.resumePdfPath}>Download PDF</a>
              </p>
            </div>

            <div class="mt-5">
              <p class="eyebrow">Privacy Note</p>
              <ul class="bullet-list mt-2">
                {profile.privacyNotes.map((note) => <li>{note}</li>)}
              </ul>
            </div>
          </div>

          <div>
            {!formAction && <p class="notice">Set <code>PUBLIC_FORMSPREE_ENDPOINT</code> to enable live form submission.</p>}

            <form method="POST" action={formAction || 'https://formspree.io/f/your-form-id'}>
              <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" class="hidden" />
              <label>
                Name
                <input required name="name" placeholder="Your name" />
              </label>
              <label>
                Email
                <input type="email" required name="email" placeholder="you@example.com" />
              </label>
              <label>
                Subject
                <input required name="subject" placeholder="Nursing position / inquiry" />
              </label>
              <label>
                Message
                <textarea rows={5} required name="message" placeholder="Please share role details, location, and expected responsibilities."></textarea>
              </label>
              <button type="submit" class="btn-inline-primary mt-1 w-fit">
                Send Inquiry
              </button>
            </form>
          </div>
        </div>
      </article>
    </Container>
  </section>
</BaseLayout>
