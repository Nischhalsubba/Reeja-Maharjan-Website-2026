---
import BaseLayout from '../layouts/BaseLayout.astro';
import Card from '../components/Card.astro';
import SkillsGrid from '../components/sections/SkillsGrid.astro';
import Toggle from '../components/Toggle.astro';
import SpringDemo from '../components/islands-react/SpringDemo';
import TransitionDemo from '../components/islands-react/TransitionDemo';
import { profile } from '../content/profile';

const showMotionLab = import.meta.env.DEV;
---

<BaseLayout
  title="Skills"
  description="Grouped nursing skills, tools, and communication competencies from Reeja's profile."
  page="skills"
>
  <SkillsGrid>
    <div class="mt-8 grid gap-4 md:grid-cols-2" data-motion="reveal">
      <Toggle
        id="skills-phone-panel"
        labelOn="Hide phone"
        labelOff="Show phone"
        defaultOn={profile.privacy.showPhoneByDefault}
      >
        <p class="text-muted text-sm">{profile.phone ?? 'Phone not listed.'}</p>
      </Toggle>
      <Toggle
        id="skills-reference-panel"
        labelOn="Hide references"
        labelOff="Show references"
        defaultOn={profile.privacy.showReferencesByDefault}
      >
        <ul class="space-y-2 text-sm">
          {
            profile.references.map((ref) => (
              <li class="text-muted">
                <span class="font-semibold text-[var(--text)]">{ref.name}</span> - {ref.role}
                <br />
                {ref.contact}
              </li>
            ))
          }
        </ul>
      </Toggle>
    </div>

    {
      showMotionLab && (
        <details class="card-surface mt-8 p-5 md:p-7" data-motion-lab-root>
          <summary class="cursor-pointer text-xl font-semibold">Dev Motion Lab</summary>
          <p class="text-muted mt-2 text-sm">
            Demo-only toolbox playground. Libraries load on demand and do not affect production bundles.
          </p>

          <div class="mt-4 grid gap-3 md:grid-cols-2">
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="waapi">Run WAAPI demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="motion">Run Motion demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="anime">Run Anime.js demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="popmotion">Run Popmotion demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="velocity">Run Velocity demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="mojs">Run Mo.js demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="lottie">Run Lottie demo</button></Card>
            <Card><button type="button" class="rounded-full border px-3 py-1 text-xs font-semibold" data-lab-action="three">Run Three.js demo</button></Card>
          </div>

          <div class="mt-5" data-lab-canvas>
            <p class="text-muted text-sm">Click a demo button to run an animation sample.</p>
          </div>

          <div class="mt-5 grid gap-3 md:grid-cols-2">
            <SpringDemo client:load />
            <TransitionDemo client:load />
          </div>
        </details>
      )
    }
  </SkillsGrid>
</BaseLayout>
