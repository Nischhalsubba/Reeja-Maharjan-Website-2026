---
import type { ProofSnippet } from '../content/profile';

interface Props {
  item: ProofSnippet;
  className?: string;
}

const { item, className = '' } = Astro.props as Props;
const typeLabel =
  item.type === 'experience-letter' ? 'Experience Letter' : item.type === 'reference' ? 'Reference' : 'Training Proof';
---

<article class:list={['proof-card', 'card-surface', className]} data-proof-card data-motion="reveal" data-tilt-card>
  <p class="proof-type">{typeLabel}</p>
  <h3 class="proof-title">{item.title}</h3>
  <p class="proof-text">{item.text}</p>
  {
    item.evidence?.length ? (
      <div class="proof-evidence-list">
        {item.evidence.slice(0, 2).map((ev) => (
          <a
            href={ev.file}
            target="_blank"
            rel="noreferrer noopener"
            class="proof-evidence-chip"
            data-lightbox-trigger
            data-lightbox-id={`proof-${item.id}-${ev.title}`}
            data-lightbox-src={ev.file}
            data-lightbox-alt={ev.alt}
            data-lightbox-title={ev.title}
            data-lightbox-issuer={item.source}
            data-lightbox-group={`proof-${item.id}`}
            aria-label={`Open evidence: ${ev.title}`}
          >
            <img src={ev.file} alt={ev.alt} loading="lazy" decoding="async" />
            <span>
              <strong>{ev.title}</strong>
              {ev.note && <small>{ev.note}</small>}
            </span>
          </a>
        ))}
      </div>
    ) : null
  }
  <p class="proof-source">{item.source}</p>
</article>
